<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>Dashboard</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta
	content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0'
	name='viewport' />
<meta name="viewport" content="width=device-width" />

<link th:href="@{../assets/css/bootstrap.min.css}" rel="stylesheet" />
<link th:href="@{../assets/css/material-dashboard.css}" rel="stylesheet" />
<link th:href="@{../assets/css/demo.css}" rel="stylesheet" />
<link
	href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css"
	rel="stylesheet">
<link rel="stylesheet" type="text/css"
	href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">
</head>
<body>
	<div class="wrapper">
		<div th:replace="fragments/sidebar :: sidebar"></div>
		<div class="main-panel">
			<div th:replace="fragments/navbar :: navbar"></div>
			<div class="content">
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-12">
							<div class="card">
								<div class="card-header card-header-icon"
									data-background-color="green">
									<i class="material-icons">&#xE894;</i>
								</div>
								<div class="card-content">
									<h4 class="card-title">Option</h4>
									<div>
										<div class="row">
											<div class="col-md-3">
												<button class="btn btn-info" id="benchMarkBtn">
													BenchMark
													<div class="ripple-container"></div>
												</button>
											</div>
											<div class="col-md-9" id="divChart"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div th:each="video : ${videos}">
						<div class="col-md-6">
							<div class="card">
								<div class="card-header" style="margin-bottom: 40px;">
									<h4 class="card-title" th:text=${video[1]}></h4>
								</div>
								<div class="card-body" style="margin-bottom: 15px">
									<div class="card-image text-center"
										style="background-color: black;">
										<iframe
											th:src="@{'https://www.youtube.com/embed/' + ${video[2]}}"
											frameborder="0"
											allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
											allowfullscreen></iframe>
									</div>
									<div class="text-center">
										<button
											th:onclick="'javascript:singleBenchMark(' + ${video[0]} + ');'"
											class="btn btn-info">BenchMark</button>
									</div>
								</div>
								<div class="card-footer">
									<div class="stats">
										<i class="fa fa-thumbs-up" aria-hidden="true"></i> <span
											th:text="${video[3]}"></span> <i class="fa fa-share-alt"
											aria-hidden="true"></i> <span th:text="${video[4]}"></span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div th:replace="fragments/footer :: footer"></div>
		</div>
	</div>

	<!-- Modal show chart -->
	<div th:replace="fragments/modal :: modal"></div>

</body>
<!--   Core JS Files   -->
<script th:src="@{../assets/js/jquery-3.3.1.min.js}"
	type="text/javascript"></script>
<script th:src="@{../assets/js/bootstrap.min.js}" type="text/javascript"></script>
<script th:src="@{../assets/js/material.min.js}" type="text/javascript"></script>
<script th:src="@{../assets/js/perfect-scrollbar.jquery.min.js}"
	type="text/javascript"></script>
<!-- Include a polyfill for ES6 Promises (optional) for IE11, UC Browser and Android browser support SweetAlert -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
<!-- Library for adding dinamically elements -->
<script th:src="@{../assets/js/arrive.min.js}" type="text/javascript"></script>
<!-- Forms Validations Plugin -->
<script th:src="@{../assets/js/jquery.validate.min.js}"></script>
<!--  Plugin for Date Time Picker and Full Calendar Plugin-->
<script th:src="@{../assets/js/moment.min.js}"></script>
<!--  Charts Plugin, full documentation here: https://gionkunz.github.io/chartist-js/ -->
<script th:src="@{../assets/js/chartist.min.js}"></script>
<!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
<script th:src="@{../assets/js/jquery.bootstrap-wizard.js}"></script>
<!--  Notifications Plugin, full documentation here: http://bootstrap-notify.remabledesigns.com/    -->
<script th:src="@{../assets/js/bootstrap-notify.js}"></script>
<!-- Sliders Plugin, full documentation here: https://refreshless.com/nouislider/ -->
<script th:src="@{../assets/js/nouislider.min.js}"></script>
<!--  Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
<script th:src="@{../assets/js/jquery.select-bootstrap.js}"></script>
<!-- Sweet Alert 2 plugin, full documentation here: https://limonte.github.io/sweetalert2/ -->
<script th:src="@{../assets/js/sweetalert2.js}"></script>
<!-- Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
<script th:src="@{../assets/js/jquery.tagsinput.js}"></script>
<!-- Material Dashboard javascript methods -->
<script th:src="@{../assets/js/material-dashboard.js}"></script>
<script th:src="@{../assets/js/project.js}"></script>

<script type="text/javascript">
	$("#benchMarkBtn").click(function() {
		$.ajax({
			type : "GET",
			dataType : "json",
			url : '/doBenchMark/2',
			contentType: 'application/json; charset=utf-8',
			success : function(data) {
				console.log("result", data);
				var listLabel = [];
				var listTotalLikes = [];
				var listTotalShares = [];
				if (data.list.length > 0) {
					for (var i = 0; i < data.list.length; i++) {
						listLabel.push(data.list[i][0]);
						listTotalLikes.push(data.list[i][1]);
						listTotalShares.push(data.list[i][2]);
					}
				}
				$("#contentChart").remove();
				var html = "";
				html = '<div class="card" id="contentChart"><div class="card-header card-header-icon" data-background-color="rose"> <i class="material-icons">insert_chart</i> </div> <div class="card-content">'
						+ '<h4 class="card-title">Likes, Shares Chart <small>- Bar Chart</small> </h4></div><div id="mainChart" class="ct-chart"></div><div class="tim-typo"><span class="text-primary" style="font-weight: bold; font-size: 1.4em;">Runtime: '
						+ data.mySqlQueryTime
						+ 'ms</span> </div></div>';
				$("#divChart").append(html);
				project.initCharts("mainChart",listLabel, listTotalLikes, listTotalShares);
				project.showNotification('bottom','left');
			}
		});
	})
	
	function singleBenchMark(id){
		$.ajax({
			type : "GET",
			url : '/singleBenchMark/2/'+ id,
			contentType: 'application/json; charset=utf-8',
			success : function(data) {
				console.log("result", data);
				var listLabel = [];
				var listTotalLikes = [];
				var listTotalShares = [];
				if (data.list.length > 0) {
					listLabel.push(data.list[0][0]);
					listTotalLikes.push(data.list[0][1]);
					listTotalShares.push(data.list[0][2]);
				}		
				$("#modaContentChart").remove();
				var html = "";
				html = '<div class="card" id="modaContentChart"><div class="card-header card-header-icon" data-background-color="rose"> <i class="material-icons">insert_chart</i> </div> <div class="card-content">'
						+ '<h4 class="card-title">Likes, Shares Chart <small>- Bar Chart</small> </h4></div><div id="modalChart" class="ct-chart"></div><div class="tim-typo"><span class="text-primary" style="font-weight: bold; font-size: 1.4em;">Runtime: '
						+ data.mySqlQueryTime
						+ 'ms</span> </div></div>';
				$("#addBodyContent").append(html);
				project.initCharts("modalChart",listLabel, listTotalLikes, listTotalShares);
				project.showNotification('bottom','left');
				$("#showModal").show();
			}
		});
	};
		
	$("#closeModalBtn").click(function(){
		$("#showModal").hide();
	});
</script>
</html>